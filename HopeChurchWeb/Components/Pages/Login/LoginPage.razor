@page "/login"
@using HopeChurchWeb.Common.Enum

<EditForm Model="@_formLogin">
    <MudContainer MaxWidth="MaxWidth.Medium" Class="mt-16">
        <MudCard Elevation="2">
            <MudCardContent>
                <MudGrid>
                    <!-- Left Column -->
                    <MudItem xs="12" sm="3" Class="d-flex align-center justify-center">
                        <MudText Typo="Typo.h5" Style="font-weight: 500;">登入</MudText>
                    </MudItem>

                    <!-- Right Column -->
                    <MudItem xs="12" sm="9">
                        <MudStack Spacing="4">
                            <!-- Title -->
                            <MudItem xs="12" sm="12" Class="d-flex align-center">
                                <MudText Typo="Typo.h5" Style="font-weight: 500; margin-right: 16px;">帳號</MudText>
                                <MudChipSet @bind-SelectedValue="_formLogin.LoginMode"
                                            SelectionMode="SelectionMode.SingleSelection"
                                            CheckMark>
                                    <MudChip Value="@LoginModeEnum.Church.ToString().ToLower()"
                                             Variant="Variant.Outlined">教會
                                    </MudChip>
                                    <MudChip Value="@LoginModeEnum.CGM.ToString().ToLower()"
                                             Variant="Variant.Outlined">CGM
                                    </MudChip>
                                </MudChipSet>
                            </MudItem>

                            <!-- Login Form -->
                            <MudTextField T="string"
                                          @bind-Value="_formLogin.Account"
                                          Label="帳號"
                                          HelperText="姓名 或 Email"
                                          Variant="Variant.Outlined"
                                          FullWidth="true"/>

                            <MudTextField T="string"
                                          @bind-Value="_formLogin.Password"
                                          InputType="@_passwordInputType"
                                          Label="密碼"
                                          Variant="Variant.Outlined"
                                          Adornment="Adornment.End"
                                          AdornmentIcon="@_passwordInputIcon"
                                          OnAdornmentClick="HandlePasswordInputIconClick"
                                          FullWidth="true"/>

                            <!-- Forgot Email Link -->
                            <MudButton Variant="Variant.Text"
                                       Style="color: #604847"
                                       Class="ml-1"
                                       OnClick="HandleForgetPasswordClick">
                                忘記密碼？
                            </MudButton>

                            <!-- Buttons -->
                            <MudStack Row="true"
                                      Justify="Justify.SpaceBetween"
                                      Style="width: 100%">
                                @if (_formLogin.LoginMode == LoginModeEnum.CGM.ToString().ToLower())
                                {
                                    <MudButton Variant="Variant.Outlined"
                                               Style="color: #604847; width: 50%; visibility: hidden"
                                               OnClick="HandleSignupClick">
                                        註冊
                                    </MudButton>
                                }
                                else
                                {
                                    <MudButton Variant="Variant.Outlined"
                                               Style="color: #604847; width: 50%"
                                               OnClick="HandleSignupClick">
                                        註冊
                                    </MudButton>
                                }

                                <MudButton Variant="Variant.Filled"
                                           Style="color: white; background-color: #604847; width: 50%"
                                           OnClick="HandleSubmitClick">
                                    登入
                                </MudButton>
                            </MudStack>
                        </MudStack>
                    </MudItem>
                </MudGrid>
            </MudCardContent>
        </MudCard>
    </MudContainer>
</EditForm>